<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Recode pre-defined missing values as NA — recode_missings • essurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Recode pre-defined missing values as NA — recode_missings" />
<meta property="og:description" content="This function is not needed any more, please see the details section." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">essurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.7.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro_ess.html">Introduction to the essurvey package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/essurvey/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Recode pre-defined missing values as NA</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/essurvey/blob/master/R/recode_missings.R'><code>R/recode_missings.R</code></a></small>
    <div class="hidden name"><code>recode_missings.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is not needed any more, please see the details section.</p>
    </div>

    <pre class="usage"><span class='fu'>recode_missings</span><span class='op'>(</span><span class='va'>ess_data</span>, <span class='va'>missing_codes</span><span class='op'>)</span>

<span class='fu'>recode_numeric_missing</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>missing_codes</span><span class='op'>)</span>

<span class='fu'>recode_strings_missing</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>missing_codes</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ess_data</th>
      <td><p>data frame or <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> with data from the
European Social Survey. This data frame should come either
from <code><a href='import_rounds.html'>import_rounds</a></code>, <code><a href='import_country.html'>import_country</a></code> or read with
<code><a href='https://haven.tidyverse.org/reference/read_dta.html'>read_dta</a></code> or <code><a href='https://haven.tidyverse.org/reference/read_spss.html'>read_spss</a></code>. This is the case because it
identifies missing values using <code><a href='https://haven.tidyverse.org/reference/labelled.html'>labelled</a></code> classes.</p></td>
    </tr>
    <tr>
      <th>missing_codes</th>
      <td><p>a character vector with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' or 'Not available'. By default
all values are chosen. Note that the wording is case sensitive.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>a <code><a href='https://haven.tidyverse.org/reference/labelled.html'>labelled</a></code> numeric</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>a character vector</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The same data frame or <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> but with values 'Not applicable',
'Refusal', 'Don't Know', 'No answer' and 'Not available' recoded
as NA.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data from the European Social Survey is always accompanied by a script
that recodes the categories 'Not applicable', 'Refusal', 'Don't Know',
'No answer' and 'Not available' to missing. This function recodes
these categories to NA</p>


<p>The European Social Survey now provides these values recoded automatically
in Stata data files. These missing categories are now read as missing values
by <code><a href='https://haven.tidyverse.org/reference/read_dta.html'>read_dta</a></code>, reading the missing categories correctly from Stata.For an example on how these values are coded, see <a href='https://github.com/ropensci/essurvey/issues/35'>here</a>.</p>
<p>Old details:</p>
<p>When downloading data directly from the European Social Survey's website,
the downloaded .zip file contains a script that recodes some categories
as missings in Stata and SPSS formats.</p>
<p>For recoding numeric variables <code>recode_numeric_missings</code>
uses the labels provided by the <code><a href='https://haven.tidyverse.org/reference/labelled.html'>labelled</a></code>
class to delete the labels matched in <code>missing_codes</code>. For the
character variables matching is done with the underlying number assigned to
each category, namely 6, 7, 8, 9 and 9 for 'Not applicable', Refusal',
'Don't Know', No answer' and 'Not available'.</p>
<p>The functions are a direct translation of the Stata script that comes
along when downloading one of the rounds. The Stata script is the same
for all rounds and all countries, meaning that these functions work
for all rounds.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>seven</span> <span class='op'>&lt;-</span> <span class='fu'><a href='import_rounds.html'>import_rounds</a></span><span class='op'>(</span><span class='fl'>7</span>, <span class='va'>your_email</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>seven</span><span class='op'>$</span><span class='va'>tvtot</span>, <span class='st'>"labels"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>seven</span><span class='op'>$</span><span class='va'>tvtot</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>seven</span><span class='op'>$</span><span class='va'>lnghom1</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># First three are actually missing values</span>

<span class='va'>seven_recoded</span> <span class='op'>&lt;-</span> <span class='fu'>recode_missings</span><span class='op'>(</span><span class='va'>seven</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>seven_recoded</span><span class='op'>$</span><span class='va'>tvtot</span>, <span class='st'>"labels"</span><span class='op'>)</span>
<span class='co'># All missings have been removed</span>
<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>seven_recoded</span><span class='op'>$</span><span class='va'>tvtot</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>seven_recoded</span><span class='op'>$</span><span class='va'>lnghom1</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># All missings have been removed</span>

<span class='co'># If you want to operate on specific variables</span>
<span class='co'># you can use other recode_*_missing </span>

<span class='va'>seven</span><span class='op'>$</span><span class='va'>tvtot</span> <span class='op'>&lt;-</span> <span class='fu'>recode_numeric_missing</span><span class='op'>(</span><span class='va'>seven</span><span class='op'>$</span><span class='va'>tvtot</span><span class='op'>)</span>

<span class='co'># Recode only 'Don't know' and 'No answer' to missing</span>
<span class='va'>seven</span><span class='op'>$</span><span class='va'>tvpol</span> <span class='op'>&lt;-</span> <span class='fu'>recode_numeric_missing</span><span class='op'>(</span><span class='va'>seven</span><span class='op'>$</span><span class='va'>tvpol</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Don't know"</span>, <span class='st'>"No answer"</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># The same can be done with recode_strings_missing</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jorge Cimentada.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


